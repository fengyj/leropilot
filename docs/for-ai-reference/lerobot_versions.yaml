# LeRobot 版本元数据
# 此文件基于 https://github.com/huggingface/lerobot 仓库的真实数据生成
# 用于 AI 参考，指导环境创建功能的代码生成和维护
# 不被运行时代码直接读取

# 数据源：
# - Tags: https://api.github.com/repos/huggingface/lerobot/tags
# - pyproject.toml: https://raw.githubusercontent.com/huggingface/lerobot/{ref}/pyproject.toml
# - PyTorch 兼容性: https://pytorch.org/get-started/previous-versions/

metadata:
  generated_at: "2025-11-25"
  source_repo: "https://github.com/huggingface/lerobot"
  latest_stable: "v0.4.1"
  minimum_supported: "v0.3.3"

versions:
  # 主分支（开发版本）
  main:
    version: "0.4.2-dev"
    release_date: null
    python_version: ">=3.10"
    torch_version: ">=2.2.1,<2.8.0"
    torchvision_version: ">=0.21.0,<0.23.0"
    cuda_versions: ["11.8", "12.1", "12.4"]  # 基于 PyTorch 2.2.x-2.7.x 兼容性
    rocm_versions: ["5.7", "6.0", "6.1", "6.2"]  # 基于 PyTorch 2.2.x-2.7.x 兼容性
    ffmpeg_version: "7.1.3"
    requires_libsvtav1: true
    notes: |
      - 开发分支，包含最新功能和修复
      - 版本号 0.4.2（未发布）
      - 与 v0.4.1 依赖要求相同
      - 可能包含不稳定功能

  # v0.4.x 系列（当前稳定版）
  v0.4.1:
    version: "0.4.1"
    release_date: "2024-11-10"
    python_version: ">=3.10"
    torch_version: ">=2.2.1,<2.8.0"
    torchvision_version: ">=0.21.0,<0.23.0"
    cuda_versions: ["11.8", "12.1", "12.4"]
    rocm_versions: ["5.7", "6.0", "6.1", "6.2"]
    ffmpeg_version: "7.1.3"
    requires_libsvtav1: true
    extras_count: 19  # 不包括 dev/test/video_benchmark
    notes: |
      - 最新稳定版本
      - Python 3.10+ 必需
      - PyTorch 2.2.1-2.7.x 支持
      - CUDA 11.8/12.1/12.4 支持
      - ROCm 5.7/6.0/6.1/6.2 支持
      - FFmpeg 7.1.3 含 libsvtav1 编码器
      - 新增 phone 遥控支持
      - 新增 libero 和 metaworld 仿真

  v0.4.0:
    version: "0.4.0"
    release_date: "2024-10-24"
    python_version: ">=3.10"
    torch_version: ">=2.2.1,<2.8.0"
    torchvision_version: ">=0.21.0,<0.23.0"
    cuda_versions: ["11.8", "12.1", "12.4"]
    rocm_versions: ["5.7", "6.0", "6.1", "6.2"]
    ffmpeg_version: "7.1.3"
    requires_libsvtav1: true
    notes: |
      - Dataset v3.0 重大更新
      - 新增 VLA 模型：PI0.5, Gr00T N1.5
      - 新增 LIBERO 和 Meta-World 仿真支持
      - 移除 xarm 仿真（在 v0.3.x 中存在）
      - 依赖要求与 v0.4.1 相同

  # v0.3.x 系列（旧稳定版）
  v0.3.3:
    version: "0.3.3"
    release_date: "2024-09-xx"  # 需从 GitHub Releases 确认
    python_version: ">=3.10"
    torch_version: ">=2.2.1,<2.8.0"
    torchvision_version: ">=0.21.0,<0.23.0"
    cuda_versions: ["11.8", "12.1", "12.4"]
    rocm_versions: ["5.7", "6.0", "6.1", "6.2"]
    ffmpeg_version: "7.1.3"
    requires_libsvtav1: true
    notes: |
      - v0.3 系列最后稳定版
      - 包含 xarm 仿真（v0.4.x 中移除）
      - 策略模型名称为 pi0（v0.4.x 改为 pi）
      - 缺少 phone、libero、metaworld 支持

  v0.3.2:
    version: "0.3.2"
    release_date: "2024-08-xx"  # 需从 GitHub Releases 确认
    python_version: ">=3.10"
    torch_version: ">=2.2.1,<2.8.0"
    torchvision_version: ">=0.21.0,<0.23.0"
    cuda_versions: ["11.8", "12.1", "12.4"]
    rocm_versions: ["5.7", "6.0", "6.1", "6.2"]
    ffmpeg_version: "7.1.3"
    requires_libsvtav1: true
    notes: |
      - v0.3 系列早期版本
      - 基本特性与 v0.3.3 相同

# 版本映射规则（用于 AI 生成代码时的逻辑）
version_mapping:
  # Tag 模式匹配
  tag_patterns:
    - pattern: "^v0\\.4\\."  # v0.4.0, v0.4.1, v0.4.2, ...
      base_version: "v0.4.1"
      notes: "所有 v0.4.x tags 使用 v0.4.1 的依赖配置"

    - pattern: "^v0\\.3\\."  # v0.3.0, v0.3.1, v0.3.2, v0.3.3, ...
      base_version: "v0.3.3"
      notes: "所有 v0.3.x tags 使用 v0.3.3 的依赖配置"

  # 分支映射
  branch_mapping:
    main: "main"
    master: "main"  # 如果有 master 分支
    dev: "main"     # 开发分支使用 main 配置
    default: "main" # 其他未知分支默认使用 main

# PyTorch CUDA 兼容性矩阵（供 AI 参考）
# 数据源: https://pytorch.org/get-started/previous-versions/
pytorch_cuda_compatibility:
  "2.2.x":
    cuda: ["11.8", "12.1"]
    rocm: ["5.6", "5.7"]
  "2.3.x":
    cuda: ["11.8", "12.1"]
    rocm: ["5.7", "6.0"]
  "2.4.x":
    cuda: ["11.8", "12.1", "12.4"]
    rocm: ["5.7", "6.0", "6.1"]
  "2.5.x":
    cuda: ["11.8", "12.1", "12.4"]
    rocm: ["5.7", "6.0", "6.1"]
  "2.6.x":
    cuda: ["11.8", "12.1", "12.4"]
    rocm: ["5.7", "6.0", "6.1", "6.2"]
  "2.7.x":
    cuda: ["11.8", "12.1", "12.4"]
    rocm: ["5.7", "6.0", "6.1", "6.2"]

# AI 维护指南
maintenance_guidelines:
  update_triggers:
    - "LeRobot 仓库新增 tag"
    - "LeRobot main 分支 pyproject.toml 更新"
    - "PyTorch 发布新版本影响兼容性"

  update_procedure:
    1: "访问 GitHub API 获取最新 tags"
    2: "下载对应版本的 pyproject.toml"
    3: "提取 requires-python 和 torch 版本约束"
    4: "查询 PyTorch 官方文档确定 CUDA/ROCm 兼容版本"
    5: "更新此文件的 versions 节"
    6: "同步更新 environment_installation_config.json"
    7: "更新 lerobot_extras.yaml（如有 extras 变更）"

  validation:
    - "确保所有版本的 python_version 格式正确"
    - "确保 CUDA/ROCm 版本列表为精确版本（非范围）"
    - "验证 PyTorch 版本与 CUDA/ROCm 兼容性"
    - "测试环境创建流程"
